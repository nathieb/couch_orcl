project name: couch_orcl
description : A CouchDB Client for Oracle PL/SQL
author      : Zekeriya KOC <zekzekus@gmail.com>

-- For HTTP operations, it uses Oracle built in package UTL_HTTP

-- For JSON operations it uses PL/JSON. It is really cool stuff.
  http://sourceforge.net/projects/pljson/ 
  I am holding a mirror of the latest release from sourceforge. Not SVN trunk.
  Latest tarball.

-- Will be implemented on Oracle object types. 

-- Example usage of current very young version:

  declare
    conn           cdb_connection;
    doc            cdb_document;
  begin
    -- static methods to create a test database
    cdb_connection.delete_db('http://admin:admin@10.81.3.221:5984/', 'orcl001');
    cdb_connection.create_db('http://admin:admin@10.81.3.221:5984/', 'orcl001');

    -- create connection to a specific database
    conn        :=
      cdb_connection(
        host        => '10.81.3.221',
        port        => 5984,
        db_name     => 'orcl001',
        username    => 'admin',
        password    => 'admin');
    conn.print();

    -- create a couchdb document based on json object. id parameter can be null
    -- if so document will take its own random guuid.
    doc         := cdb_document(conn => conn, id => 'record001');
    doc.put('name', 'zekeriya');
    doc.put('surname', 'koc');
    doc.put('age', 27);
    doc.put('is_clever', true);
    -- save document for the first time. 
    doc.save();    
    cdb_utl.p(doc.id || '-' || doc.rev);
    
    -- modify document...
    doc.put('hasan', 'mahmut');
    doc.remove('is_clever');
    
    -- save again.
    doc.save();
    cdb_utl.p(doc.id || '-' || doc.rev);
  end;
  /

